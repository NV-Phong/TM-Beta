@model Task_Manager_Beta.Data.User;

<div class="container mt-4">
    <div class="row">
        <div class="col-md-3 g-3">
            <div class="card fixcard">
                <div class="card-body">


                    <div class="panel panel-primary">
                        <div class="panel-heading panel-heading-prod  align-content-center">
                            <h3>REGISTER</h3>
                        </div>
                        <div class="panel-body">
                            @if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
                            {
                                <div class="alert alert-danger" role="alert">
                                    @ViewBag.ErrorMessage
                                </div>
                            }

                            <form class="form form-horizontal" asp-action="Register" asp-controller="User"
                                  method="POST">
                                <div class="form-group">
                                    <label asp-for="UserName" class="col-md-3 control-label"></label>
                                    <div class="col-md-9">
                                        <input class="form-control" asp-for="UserName"
                                               placeholder="Nhập tên đăng nhập" autofocus required />
                                        <span asp-validation-for="UserName" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label asp-for="Email" class="col-md-3 control-label"></label>
                                    <div class="col-md-9">
                                        <input class="form-control" asp-for="Email"
                                               placeholder="Nhập địa chỉ email" required />
                                        <span asp-validation-for="  Email" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label asp-for="Password" class="col-md-3 control-label"></label>
                                    <div class="col-md-9">
                                        <input type="password" class="form-control" asp-for="Password" id="password" placeholder="Nhập mật khẩu" required
                                               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                               title="Mật khẩu phải có ít nhất 8 ký tự, bao gồm ít nhất một chữ số, một chữ thường và một chữ hoa." />
                                        <span asp-validation-for="Password" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Confirm Password:</label>
                                    <div class="col-md-9">
                                        <input type="password" class="form-control" id="confirmPassword"
                                               placeholder="Nhập lại mật khẩu" required
                                               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                               title="Mật khẩu phải có ít nhất 8 ký tự, bao gồm ít nhất một chữ số, một chữ thường và một chữ hoa."
                                               oninput="checkPasswordMatch(this);" />
                                        <div id="passwordMatchMessage"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-offset-3 col-md-9">
                                        <button type="submit" class="btnpd btn btn-custom-green border-1 border-custom-dark">Đăng ký</button>
                                    </div>
                                    <div class="col-md-offset-3 col-md-9">
                                        <p style="font-size:small; color:darkgray; ">Or</p>
                                    </div>
                                    <div class="col-md-offset-3 col-md-9" style="margin-top:-25px">
                                        <a asp-controller="User" asp-action="Login" class="btnpd btn btn-custom-green border-1 border-custom-dark">Đăng Nhập</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        function checkPasswordMatch(input) {
            var passwordInput = document.getElementById('password');
            var confirmPasswordInput = input;
            if (passwordInput.value !== confirmPasswordInput.value) {
                confirmPasswordInput.setCustomValidity('Mật khẩu không khớp');
            } else {
                confirmPasswordInput.setCustomValidity('');
            }
        }
    </script>
} 